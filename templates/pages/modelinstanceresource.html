{% extends "pages/page.html" %}
{% load geoanalytics_tags pages_tags mezzanine_tags %}

{% block main %}
    {% set_page_permissions page %}

<div class='row'>
    {% editable page.modelinstanceresource.content %}
       {{ page.modelinstanceresource.content|safe|richtext_filters }}
    {% endeditable %}
</div>

<h4>Download files</h4>
<div class='row'>
{% if page.modelinstanceresource.resource_file %}
    <a class='btn btn-lg btn-primary' href='{{page.modelinstanceresource.resource_file.url}}'>{{ page.modelinstanceresource.resource_file.name }}</a>
{% elif page.modelinstanceresource.resource_url %}
    <a class='btn btn-lg btn-primary' href='{{page.modelinstanceresource.resource_url}}'>Resource URL links to off-site</a>
{% endif %}
</div>

<hr/>
<div class='row'>
    <ul class='list-group'>
        {% editable page.modelinstanceresource.discoverable %}
        <li class='list-group-item'><b>Creator:</b> {{ page.modelinstanceresource.creator }}</li>
        {% endeditable %}
        <li class='list-group-item'><b>Created on</b> {{ page.created|date:"SHORT_DATETIME_FORMAT" }}</li>
        <li class='list-group-item'><b>Last modified by:</b> {{ page.modelinstanceresource.last_changed_by.username }}</li>
        <li class='list-group-item'><b>Modified on</b> {{ page.updated|date:"SHORT_DATETIME_FORMAT" }}</li>
        {% editable page.modelinstanceresource.public %}
        <li class='list-group-item'><b>Publicly viewable:</b> {{ page.modelinstanceresource.public|yesno }}</li>
        {% endeditable %}
        {% editable page.modelinstanceresource.frozen %}
        <li class='list-group-item'><b>Published:</b> {{ page.modelinstanceresource.published_and_frozen|yesno }}</li>
        {% endeditable %}
        {% editable page.modelinstanceresource.do_not_distribute %}
        <li class='list-group-item'><b>Do Not Distribute:</b> {{ page.modelinstanceresource.do_not_distribute|yesno }}</li>
        {% endeditable %}
        {% editable page.modelinstanceresource.discoverable %}
        <li class='list-group-item'><b>Discoverable:</b> {{ page.modelinstanceresource.discoverable|yesno }}</li>
        {% endeditable %}
    </ul>
    <h5>Owners</h5>
    <div class='list-group'>
        {% editable page.modelinstanceresource.owners %}
        {% for owner in page.modelinstanceresource.owners.all %}
        <a class='list-group-item' href='mailto:{{ page.modelinstanceresource.owner.email }}'>
             {% if owner.first_name %}
                {{ owner.first_name }} {{ page.modelinstanceresource.owner.last_name }}
             {% else %}
                {{ owner.username }}
             {% endif %}
	</a>
        {% endfor %}
        {% endeditable %}
    </div>
</div>

<h4>Dublin Core Metadata</h4>
<table class="table table-striped">
{% for m in page.modelinstanceresource.dublin_metadata.all %}
<tr>
<td>{{m.term_name}}</td>
<td>{{m.qualifier}}</td>
<td>{{m.content}}</td>
</tr>
{% endfor %}
</table>

<h4>Keywords</h4>

<ul class='list-group'>
    {% editable page.keywords %}
    {% for keyword in page.keywords.all %}
    <li class='list-group-item'>{{ keyword }}</li>
    {% endfor %}
    {% endeditable %}
</ul>

    {% include 'pages/includes/page_permissions_editor.html' %}

{% endblock %}
